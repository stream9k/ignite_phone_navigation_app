# 차량용 안드로이드 자동화 앱 (Ignite)

차량에 고정된 안드로이드 기기를 사용할 때, 차량의 전원(시동) 상태에 따라 지정된 앱을 자동으로 실행하고, 전원이 꺼지면 앱 종료 후 시스템 종료 또는 비행기 모드로 전환하여 기기 관리를 자동화합니다.

## 1. 주요 기능 및 개선 사항

- **다중 앱 자동 실행**: 차량 시동을 걸어 스마트폰에 전원이 연결되면, 지정된 앱들을 순서대로 자동 실행합니다.
  - `+`, `-` 버튼을 통해 여러 개의 앱을 목록에 추가하거나 삭제할 수 있습니다.
- **실행 앱 자동 종료**: 차량 시동을 끄면(전원 해제), 설정한 시간(초 단위) 후에 실행 중인 모든 앱을 종료('모두 닫기')하여 배터리를 절약합니다.
  - **잠금 화면 대응 강화**: 앱 종료 시도 시 잠금 패턴 창이 뜨는 경우, 자동으로 뒤로 가기를 수행하여 창을 닫고 종료 동작을 수행합니다.
- **최종 동작 자동화**: 앱 종료 후, 설정된 대기 시간(분 단위)이 지나면 다음 3가지 동작 중 하나를 수행합니다.
  1.  **시스템 종료**: 기기 전원을 완전히 끕니다. (장기 주차 시 배터리 방전 방지)
  2.  **비행기 모드**: 네트워크를 차단하여 대기 전력을 최소화합니다. (다음에 시동 걸면 비행기 모드 자동 해제)
      - **잠금 화면 대응**: 화면이 꺼진 상태에서도 화면 켜기 -> 패턴 창 닫기 -> 퀵 패널 열기 -> 버튼 찾기 과정을 통해 비행기 모드를 안정적으로 제어합니다.
      - **설정 바로가기 제공**: 삼성 갤럭시 등 보안 정책으로 인해 잠금 상태에서 비행기 모드 제어가 안 될 경우, 앱 내 [네트워크 보안잠금 해제] 버튼을 통해 쉽게 설정을 변경할 수 있습니다.
  3.  **없음**: 앱 종료 후 아무 동작도 하지 않고 화면만 꺼진 상태로 대기합니다.
- **기능 일시 정지**: 메인 스위치를 통해 모든 자동화 기능을 간편하게 끄고 켤 수 있습니다.

## 2. APK 설치 시 주의사항 (Play 프로텍트)

APK 파일로 직접 설치할 때 구글 **Play 프로텍트**에 의해 설치가 차단될 수 있습니다.

1.  설치 시 "유해한 앱 차단됨" 경고창이 뜨면 **[무시하고 설치]**를 누릅니다.
2.  만약 설치가 아예 안 된다면:
    - 구글 **Play 스토어** 앱 실행 -> 우측 상단 프로필 아이콘 클릭
    - **[Play 프로텍트]** 메뉴 선택 -> 우측 상단 **설정(톱니바퀴)** 아이콘 클릭
    - **[Play 프로텍트로 앱 검사]** 항목을 잠시 **끄고(OFF)** 설치를 진행하세요.

## 3. 초기 설정 가이드 (필수)

앱의 모든 기능을 사용하려면 앱 실행 후 화면에 표시된 번호 순서대로 권한을 설정해야 합니다.

1.  **알림 권한 요청**: 앱의 상태 알림을 표시하기 위해 필요합니다.
2.  **전체 화면 알림 설정**: 화면이 꺼져 있을 때도 앱을 실행하기 위해 필요합니다.
3.  **다른 앱 위에 표시 허용**: 다른 앱을 화면 위에 띄우기 위해 필요합니다.
4.  **접근성 설정 (중요)**:
    *   이 권한은 '모든 앱 종료', '시스템 종료', '비행기 모드' 등 화면을 자동으로 터치하는 핵심 기능에 필수적입니다.
    *   **Android 13 이상 사용자 필독 (제한된 설정 해제 방법)**:
        보안 정책으로 인해 접근성 권한 허용이 막혀 있을 수 있습니다. 아래 순서대로 진행해 주세요.
        1.  폰 설정 -> 접근성 -> 설치된 앱 -> **Ignite** 선택.
        2.  회색으로 비활성화된 스위치를 누르면 **"제한된 설정"**이라며 켤 수 없다는 메시지가 뜹니다. 이때 **[확인]**을 누릅니다.
        3.  다시 **Ignite 앱**으로 돌아와 **[4-1. 제한된 설정 허용]** 버튼을 누릅니다. (앱 정보 화면으로 이동됨)
        4.  우측 상단 **점 세 개(⋮)** 메뉴를 누르고 **[제한된 설정 허용]**을 선택하고 본인 인증(패턴/지문)을 합니다.
            *   *주의: 점 세 개 메뉴가 보이지 않는다면, 위 1~2번 과정을 먼저 수행하여 시스템이 차단 기록을 남기게 한 후 다시 시도하세요.*
        5.  이제 다시 **[4. 접근성 설정]** 버튼을 눌러 접근성 메뉴로 가면 **Ignite** 서비스를 켤 수 있습니다.

5.  **배터리 최적화 해제**: 앱이 백그라운드에서 시스템에 의해 종료되지 않도록 설정합니다.
6.  **네트워크 보안잠금 해제 (선택)**: '비행기 모드' 기능을 사용할 때, 잠금 화면에서 패턴 입력 없이 비행기 모드를 켜고 끄려면 이 버튼을 눌러 **[네트워크 및 보안 잠금]** 설정을 **꺼짐(OFF)**으로 변경해야 합니다.

## 4. 사용 방법

### 가. 기능 활성화
- **Ignite 앱 기능 전체 사용**: 이 스위치를 **ON**으로 설정해야 모든 자동화 기능이 동작합니다.

### 나. 자동 실행 앱 설정
1.  앱 목록에서 실행 버튼을 눌러 원하는 내비게이션/음악 앱을 선택합니다.
2.  `[+]`, `[-]` 버튼으로 여러 앱을 순차적으로 실행하도록 구성할 수 있습니다.

### 다. 지연 시간 및 최종 동작 설정
1.  **앱 종료 대기**: 시동이 꺼진 후 앱 종료 시도 전 대기 시간(초)을 설정합니다.
2.  **최종 동작 설정**: `시스템 종료`, `비행기 모드`, `없음` 중 선택합니다.
3.  **동작 대기**: 앱 종료 후 최종 동작 실행 전 대기 시간(분)을 설정합니다.

### 라. 수동 테스트
설정 완료 후 아래 버튼으로 기능을 즉시 테스트해 볼 수 있습니다.
- **내비 실행**: 설정된 앱 목록 실행 테스트
- **앱 종료**: 최근 앱 목록 열기 -> 모두 닫기 테스트
- **시스템 종료**: 전원 끄기 팝업 및 종료 테스트
- **비행기 모드 토글 테스트**: 상단바 내리기 -> 비행기 모드 버튼 클릭 테스트

---
**개발자 참고**: 이 앱은 `AccessibilityService`를 사용하여 터치 조작을 자동화하므로, 기기 루팅 없이 순정 상태에서 작동합니다. 단, OS 업데이트나 제조사 UI 변경(One UI 버전 등)에 따라 버튼 인식 로직의 수정이 필요할 수 있습니다.
